<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TeachHub ‚Äì Summary</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
    rel="stylesheet"
  />
  <style>
    /* Theme variables */
    :root {
      --color-deep-purple: #0f0028;
      --color-dark-accent: #2d0063;
      --color-primary-glow: #8b5cf6;
      --color-secondary-glow: #a78bfa;
      --color-text-light: #e0e7ff;
      --color-text-muted: #b4bfd9;
      --color-summary-bg: rgba(255,255,255,0.05);
      --color-summary-highlight: rgba(139,92,246,0.2);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Inter", sans-serif;
      background-color: var(--color-deep-purple);
      background-image: radial-gradient(
        at top left,
        rgba(45,0,99,0.4) 0%,
        rgba(15,0,40,0.8) 70%,
        var(--color-deep-purple) 100%
      );
      color: var(--color-text-light);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
    }

    header {
      width: 100%;
      max-width: 1100px;
      margin-bottom: 40px;
      text-align: center;
    }

    header h1 {
      font-size: 2.8em;
      color: var(--color-secondary-glow);
      text-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
    }

    header p {
      font-size: 1.2em;
      color: var(--color-text-muted);
      margin-top: 10px;
    }

    .summary-container {
      width: 100%;
      max-width: 1100px;
      background-color: var(--color-summary-bg);
      border: 1px solid rgba(139,92,246,0.2);
      border-radius: 16px;
      padding: 30px 40px;
      line-height: 1.6em;
    }

    .summary-container h2 {
      color: var(--color-primary-glow);
      font-size: 1.8em;
      margin-bottom: 15px;
    }

    .summary-container ul {
      list-style: disc inside;
      margin-top: 20px;
      margin-bottom: 30px;
    }

    .summary-container ul li {
      margin-bottom: 10px;
      color: var(--color-text-light);
    }

    .summary-container blockquote {
      margin: 20px 0;
      padding: 15px 20px;
      background-color: var(--color-summary-highlight);
      border-left: 4px solid var(--color-primary-glow);
      font-style: italic;
      color: var(--color-text-light);
    }

    .button-container {
      text-align: center;
      margin-top: 30px;
    }

    .button-container button {
      background-color: var(--color-primary-glow);
      color: var(--color-deep-purple);
      border: none;
      padding: 12px 30px;
      font-size: 1em;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
      box-shadow: 0 4px 15px rgba(139,92,246,0.4);
    }

    .button-container button:hover {
      background-color: var(--color-secondary-glow);
      box-shadow: 0 6px 20px rgba(167,139,250,0.6);
      transform: translateY(-3px);
    }

    footer {
      width: 100%;
      max-width: 1100px;
      text-align: center;
      margin-top: 60px;
      font-size: 0.9em;
      color: rgba(224,231,255,0.6);
    }

    @media (max-width: 600px) {
      header h1 {
        font-size: 2em;
      }
      .summary-container {
        padding: 20px;
      }
      .button-container button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Summary</h1>
    <p>Quick overview and key takeaways from your study material.</p>
  </header>

  <div class="summary-container">
    <h2>Key Highlights</h2>
    <ul>
      <li>The central theme is ‚Ä¶</li>
      <li>Important concept one explained ‚Ä¶</li>
      <li>Another major takeaway is ‚Ä¶</li>
      <li>Critical statistic or finding: ‚Ä¶</li>
      <li>Closing insight or recommendation.</li>
    </ul>

    <blockquote>
      ‚ÄúThis quote or key excerpt summarises the major idea and gives you a memorable highlight.‚Äù
    </blockquote>

    <h2>Next Steps</h2>
    <p>
      After reviewing key points, you can dive deeper into individual topics, generate flashcards, or test yourself with quizzes.
    </p>

    <div class="button-container">
      <button>Generate Flashcards</button>
    </div>
  </div>

  <footer>
    &copy; 2025 TeachHub | Empowering Students and Teachers
  </footer>
  <script>
document.addEventListener("DOMContentLoaded", async () => {
  const summaryContainer = document.querySelector(".summary-container");
  const button = document.querySelector(".button-container button");

  // 1Ô∏è‚É£ Get topic from localStorage (set in the main AI page)
  const topic = localStorage.getItem("selectedTopic") || "General Topic";

  // 2Ô∏è‚É£ Add topic heading
  const headerTitle = document.querySelector("header h1");
  headerTitle.textContent = `${topic} Summary`;

  // 3Ô∏è‚É£ Check if summary already exists in localStorage
  const savedSummary = localStorage.getItem(`${topic}_summary`);
  if (savedSummary) {
    summaryContainer.innerHTML = savedSummary;
    console.log("Loaded saved summary from localStorage");
    return;
  }

  // 4Ô∏è‚É£ Generate summary using AI API
  async function generateSummary() {
    const apiKey = "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"; // üîë Replace this with your ChatGPT API key
    const apiUrl = "https://api.openai.com/v1/chat/completions";

    summaryContainer.innerHTML = `<p>‚è≥ Generating summary for <b>${topic}</b>... please wait.</p>`;

    const prompt = `
      Summarize the topic "${topic}" for a student.
      Include 5 main bullet points and one short motivational quote at the end.
      Make it simple and educational.
    `;

    try {
      const response = await fetch(apiUrl, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer " + apiKey
        },
        body: JSON.stringify({
          model: "gpt-3.5-turbo",
          messages: [{ role: "user", content: prompt }]
        })
      });

      const data = await response.json();
      const aiText = data.choices?.[0]?.message?.content || "No summary generated.";

      const generatedHTML = `
        <h2>Key Highlights</h2>
        <ul>${aiText
          .split("\n")
          .map(line => `<li>${line}</li>`)
          .join("")}</ul>
        <blockquote>‚Äú${topic} ‚Äî Learn, Revise, and Grow!‚Äù</blockquote>
        <div class="button-container">
          <button>Generate Flashcards</button>
        </div>
      `;

      summaryContainer.innerHTML = generatedHTML;

      // 5Ô∏è‚É£ Save summary in localStorage
      localStorage.setItem(`${topic}_summary`, generatedHTML);
      console.log("Summary saved for:", topic);

    } catch (error) {
      console.error("Error generating summary:", error);
      summaryContainer.innerHTML = `<p>‚ùå Error generating summary. Please try again later.</p>`;
    }
  }

  // 6Ô∏è‚É£ Button event: Generate new flashcards page (or regenerate summary)
  button.addEventListener("click", () => {
    localStorage.setItem("selectedTopic", topic);
    window.location.href = "flashcards.html"; // üëâ Change if your flashcards page has a different filename
  });

  // 7Ô∏è‚É£ Auto-generate summary if not saved
  if (!savedSummary) {
    await generateSummary();
  }
});
</script>

</body>
</html>
